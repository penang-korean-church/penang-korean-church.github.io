<!DOCTYPE html>
<html lang="{{ site.lang | default: 'ko' }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!-- Primary Meta Tags -->
  <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}</title>
  <meta name="title" content="{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}">
  <meta name="description" content="{{ page.description | default: site.description }}">
  <meta name="keywords" content="{{ page.keywords | default: site.keywords }}">
  <meta name="author" content="{{ site.author }}">
  <meta name="language" content="{{ site.lang | default: 'ko' }}">
  <meta name="application-name" content="{{ site.church.name }}">
  <meta name="apple-mobile-web-app-title" content="{{ site.church.name }}">
  <meta name="theme-color" content="#2563eb">
  <link rel="canonical" href="{{ page.url | absolute_url }}">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="{{ page.url | absolute_url }}">
  <meta property="og:title" content="{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}">
  <meta property="og:description" content="{{ page.description | default: site.description }}">
  <meta property="og:site_name" content="{{ site.title }}">
  <meta property="og:locale" content="{{ site.locale | default: 'ko_KR' }}">
  {% if page.image %}
  <meta property="og:image" content="{{ page.image | absolute_url }}">
  {% else %}
  <meta property="og:image" content="{{ '/assets/images/og-image.jpg' | absolute_url }}">
  {% endif %}
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="{{ page.url | absolute_url }}">
  <meta name="twitter:title" content="{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}">
  <meta name="twitter:description" content="{{ page.description | default: site.description }}">
  {% if page.image %}
  <meta name="twitter:image" content="{{ page.image | absolute_url }}">
  {% else %}
  <meta name="twitter:image" content="{{ '/assets/images/og-image.jpg' | absolute_url }}">
  {% endif %}

  <!-- Local Business Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Church",
    "name": "{{ site.church.name }}",
    "alternateName": "{{ site.church.name_en }}",
    "url": "{{ site.url }}{{ site.baseurl }}",
    "logo": "{{ '/assets/images/logo.png' | absolute_url }}",
    "image": "{{ '/assets/images/og-image.jpg' | absolute_url }}",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "{{ site.church.address }}",
      "addressLocality": "Penang",
      "postalCode": "11200",
      "addressRegion": "Penang",
      "addressCountry": "MY"
    },
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": {{ site.church.latitude }},
      "longitude": {{ site.church.longitude }}
    },
    "telephone": "{{ site.church.phone }}",
    "email": "{{ site.church.email }}",
    "foundingDate": "{{ site.established }}",
    "description": "{{ site.description }}",
    "priceRange": "$$",
    "openingHoursSpecification": [
      {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": "Sunday",
        "opens": "11:00",
        "closes": "12:30",
        "description": "주일예배"
      }
    ],
    "sameAs": [
      {% if site.social.facebook != "" %}"{{ site.social.facebook }}",{% endif %}
      {% if site.social.instagram != "" %}"{{ site.social.instagram }}",{% endif %}
      {% if site.social.youtube != "" %}"{{ site.social.youtube }}"{% endif %}
    ]
  }
  </script>

  <!-- RSS Feed -->
  <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ '/feed.xml' | absolute_url }}">

  <!-- Additional SEO -->
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="googlebot" content="index, follow">
  <meta name="naver-site-verification" content="c51673d897229c805b54a1aa9c40381ce260949a" />
  <meta name="revisit-after" content="7 days">
  <meta name="format-detection" content="telephone=yes">
  <meta name="publisher" content="{{ site.church.name }}">
  <meta name="copyright" content="{{ site.church.name }}">
  <meta name="geo.region" content="MY-07">
  <meta name="geo.placename" content="Penang">
  <meta name="geo.position" content="{{ site.church.latitude }};{{ site.church.longitude }}">
  <meta name="ICBM" content="{{ site.church.latitude }}, {{ site.church.longitude }}">

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="{{ '/assets/images/favicon-32x32.png' | relative_url }}">
  <link rel="icon" type="image/png" sizes="16x16" href="{{ '/assets/images/favicon-16x16.png' | relative_url }}">
  <link rel="apple-touch-icon" sizes="180x180" href="{{ '/assets/images/apple-touch-icon.png' | relative_url }}">

  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">

  <!-- Theme Toggle (Load early to prevent flash) -->
  <script src="{{ '/assets/js/theme-toggle.js' | relative_url }}"></script>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-BFEVR64TEW"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-BFEVR64TEW');
  </script>

  {% include website-schema.html %}
  {% include navigation-schema.html %}
  {% include breadcrumb-schema.html %}
</head>
<body>
  {% include header.html %}

  <main class="site-main">
    {{ content }}
  </main>

  {% include footer.html %}

  <!-- Google Analytics Event Tracking -->
  <script src="{{ '/assets/js/analytics.js' | relative_url }}"></script>

  <!-- Mobile Menu Toggle -->
  <script src="{{ '/assets/js/mobile-menu.js' | relative_url }}"></script>

  <!-- Tawk.to Live Chat (temporarily disabled)
  <script type="text/javascript">
  var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
  (function(){
  var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
  s1.async=true;
  s1.src='https://embed.tawk.to/696847aabe1aa3197aa1bf35/1jevlftgh';
  s1.charset='UTF-8';
  s1.setAttribute('crossorigin','*');
  s0.parentNode.insertBefore(s1,s0);
  })();
  </script>
  -->
</body>
</html>
